<!DOCTYPE html>
<html>
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dogs and Cats</title>

     <!-- Include jQuery library  -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

     <!-- Include Tailwind library  -->
    <script src="https://cdn.tailwindcss.com"></script>

     <!-- Include Bootstrap CSS  -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.2.0/css/bootstrap.min.css">
    

</head>
<body onload="fetchDogImage()" class="bg-cover bg-center" style="background-image: url('https://images.pexels.com/photos/952670/pexels-photo-952670.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1')">


    <div class="p-6 max-w-sm mx-auto bg-white rounded-xl shadow-lg flex items-center space-x-4">
        <div class="shrink-0">
            <img class="h-12 w-12" src="https://img.icons8.com/bubbles/256/dog.png" alt="dog icon">
        </div>

        <div class="text-xl font-medium text-black">
            <button id="fetchDogBtn" onclick="fetchDogImage()" >Fetch new dogs</button>
        </div>

    </div>

    <!-- padding, max width, center, bg, rounder corners, shadow, flex, center items, padding between child elements  -->

        <div class="p-6 max-w-xs mx-auto bg-white rounded-xl shadow-lg flex items-center space-x-4 " >
            <img id="dogImage" src="" alt="Wait to get a dog">
        </div>



        <div class="p-6 max-w-sm mx-auto bg-white rounded-xl shadow-lg flex items-center space-x-4">
            <div class="shrink-0">
                <img class="h-12 w-12" src="https://img.icons8.com/fluency/256/kitty.png" alt="dog icon">
            </div>
    
            <div class="text-xl font-medium text-black">
                <button id="fetchCatBtn">Fetch new cats</button>
            </div>
    
        </div>

        <div class="p-6 max-w-xs mx-auto bg-white rounded-xl shadow-lg flex items-center space-x-4 " >
            <div id="image"></div>
        </div>
    

    <script>
    function ajax_get(url, callback) {
      var xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
          console.log('responseText:' + xmlhttp.responseText);
          try {
            var data = JSON.parse(xmlhttp.responseText);
          } catch (err) {
            console.log(err.message + " in " + xmlhttp.responseText);
            return;
          }
          callback(data);
        }
      };

      xmlhttp.open("GET", url, true);
      xmlhttp.send();
    }

    ajax_get('https://api.thecatapi.com/v1/images/search?size=full', function(data) {
      var html = '<img src="' + data[0]["url"] + '">';
      document.getElementById("image").innerHTML = html;
    });
    </script>


    <script>
        function fetchDogImage() {
            $.get('/get_dog/', function(data) {
                var message = data['message'];
                $('#dogImage').attr('src', message);
            })
            .fail(function() {
                console.log('Failed to fetch dog image.');
            });
       }



       document.getElementById("fetchCatBtn").onclick = function() {
    // Call ajax_get with a callback function
    ajax_get('https://api.thecatapi.com/v1/images/search?size=full', function(data) {
        // Callback function, called after response is received
        var html = '<img src="' + data[0]["url"] + '">'; // Assuming the response contains an array with an object with a "url" property
        document.getElementById("image").innerHTML = html;
    });
};

    </script>
</body>
</html>
