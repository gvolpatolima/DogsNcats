<!DOCTYPE html>
<html>
<head>
    {% load static %}

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dogs and Cats</title>

     <!-- Include jQuery library  -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

     <!-- Include Tailwind library  -->
    <script src="https://cdn.tailwindcss.com"></script>

     <!-- Include Bootstrap CSS  -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.2.0/css/bootstrap.min.css">
    

</head>
<body onload="fetchDogImage()" class="bg-red">
    <style>
        .slider {
            max-height: 300px;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }

        .slider img {
            display: block;
            max-width: 100%;
            height: auto;
        }
    </style>


    <div class="p-6 max-w-sm mx-auto bg-white rounded-xl shadow-lg flex items-center space-x-4">
        <div class="shrink-0">
            <img class="h-12 w-12" src="https://img.icons8.com/bubbles/256/dog.png" alt="dog icon">
        </div>

        <div class="text-xl font-medium text-black">
            <button id="fetchDogBtn" onclick="fetchDogImage()" >Fetch new dogs</button>
        </div>

    </div>

    <!-- padding, max width, center, bg, rounder corners, shadow, flex, center items, padding between child elements  -->

        <div class="p-6 max-w-xs mx-auto bg-white rounded-xl shadow-lg flex items-center space-x-4 slider" id=imageSlider>
            <img id="dogImage" src="" alt="Wait to get a dog">
        </div>



    <div id="image"></div>


    <script>
    function ajax_get(url, callback) {
      var xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
          console.log('responseText:' + xmlhttp.responseText);
          try {
            var data = JSON.parse(xmlhttp.responseText);
          } catch (err) {
            console.log(err.message + " in " + xmlhttp.responseText);
            return;
          }
          callback(data);
        }
      };

      xmlhttp.open("GET", url, true);
      xmlhttp.send();
    }

    ajax_get('https://api.thecatapi.com/v1/images/search?size=full', function(data) {
      var html = '<img src="' + data[0]["url"] + '">';
      document.getElementById("image").innerHTML = html;
    });
    </script>


    <script>
        function fetchDogImage() {
            $.get('/get_dog/', function(data) {
                var message = data['message'];
                $('#dogImage').attr('src', message);
            })
            .fail(function() {
                console.log('Failed to fetch dog image.');
            });
       }



    </script>
</body>
</html>
